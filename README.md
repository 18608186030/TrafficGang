# 交通安全云课堂APP
**《交通安全云课>堂》>已将《中国驾驶员继续教育学院》>合并为一个项目，因原继续教育和云>课>堂的继续教育部分业务逻辑有>差别，继续教育（除眉山地区）逻辑沿用原继续教育逻辑，接口通过交通安全云课堂进行接口转发，根据报名地区区分。**
## 技术要点  
人脸识别（阿里云）、地图、支付、kotlin、组件化、rxjava2、retrofit2、tinker、LiveData、ViewModel、视频播放、极光推送、腾讯TBS文件阅读、ARouter  
项目采用MVC、MVVM两种开发模式，根据业务进行组件化开发、通过ARouter进行页面跳转和数据交互  

- 组件化框架：[CC](https://qibilly.com/CC-website)
- 崩溃手机、热更新方案：[bugly、tinker](https://bugly.qq.com/docs/)
- 模块间路由、通信，解耦：[ARouter](https://github.com/alibaba/ARouter/blob/master/README_CN.md)
- 屏幕适配方案：[AndroidAutoSize](https://github.com/JessYanCoding/AndroidAutoSize/blob/master/README-zh.md)
- 视屏播放器：[GSYVideoPlayer](https://github.com/CarGuo/GSYVideoPlayer)
- 网络请求框架：[RxEasyHttp](https://github.com/zhou-you/RxEasyHttp) retrofit2+okhttp3+rxjava2二次封装
- 图片加载：Glide V4
- BaseAdapter：[BaseRecyclerViewAdapterHelper](https://github.com/CymChad/BaseRecyclerViewAdapterHelper)
- H5与原生通信JsBridge：[JsBridge](https://github.com/lzyzsd/JsBridge)
- 三方WebView与JsBridge联用：[AgentWeb](https://github.com/Justson/AgentWeb)
- TextView：[SuperTextView](https://github.com/chenBingX/SuperTextView)

## 工程目录
- app -> 壳模块  
MainActivity、启动页、欢迎页、微信支付分享配置
- basiclib -> 公共依赖模块  
三方库的依赖、工具类、kotlin扩展、
- basicres -> 公共资源模块 
公共的javaBean、kotlin扩展、工具类、推送相关、公共页面、Base封装
- component_find -> 发现模块  
短视频相关、车友圈相关、资讯相关  
- component_home -> 报名以及支付模块  
四大教育的报名、报名资料填写、订单支付，以及其他模块的入口
- component_my ->  
四大教育的模拟考试、正式考试、课程练习、个人资料的修改和维护、消息中心相关
- component_study -> 学习模块  
四大教育的视频学习、培训预约、考试预约、培训/考试签到、安全教育安全列会、安全教育安全培训

## 业务流程

### 报名流程  
所有教育课程的报名必须用户登录，并且完成实名认证方可报名缴费

1. 继续教育（除眉山地区）  
选择城市》填写报名资料》提交订单》完成支付》学习课程》考试》结业
报名资料根据后台返回规则进行填写，成都地区继续教育报名需要进行审核，审核通过后报名成功，用户可在APP进行缴费，缴费成功方可学习
2. 安全教育、记分教育（包括眉山的继续教育报名）  
选择需要报名的学习计划》填写报名资料》提交订单》完成支付》学习课程》考试》结业
3. 从业教育  
选择需要报名的学习计划》填写报名资料》订单支付》等待审核  
从业教育报名只需要在APP完成报名资料的填写，其余业务由线下完成

### 学习流程  
继续教育、安全教育、记分教育可以通过线上进行视频课程的学习。
1. 视频开始播放前需要进行点名，点名根据后台规则可分为动态人脸识别、拍照人脸识别、答题验证三种方式，点名验证通过后方可正常学习，通过后上传学时
2. 视频播放中需要进行点名，点名方式同上，通过后上传学时
3. 视频播放结束必须点名验证通过后上传学时，完成当前课件的学习
4. 未学习完成的视频不可拖动，是否支持跳跃播放视频课件由后台规则决定

### 安全培训学习流程
安全培训的课件内容包含文本、文档、图片、视频课件等形式。
1. 除视频课件外的每个课件可配置是否点名，学习完成是否签字
2. 视频课件规则同视频课程的学习规则
3. 所有课件学习完成后需进行签字确认

### 培训预约流程
1. 继续教育学习过程中，如果有发布线下的培训，用户可进行培训预约。用户可合适选择时间段预约。
2. 预约成功后可取消预约并再次预约、

### 线下考试/培训签到
根据场次、时间、地点范围进行签到验证
1. 用户根据预约的场次及时间到达现场方可进行签到。
2. 签到必须在允许的时间范围。
3. 签到必须在指定的地点开启定位后，在允许的范围内方可签到成功
4. 签到必须进行人脸识别验证

### 线上正式考试
试题类型包括单选、多选、判断是三种类型，确定试题答案后不可再次更改答案，每天可以考试的次数有限制，根据后台配置决定，目前是每天2次
1. 考试前需进行人脸识别验证，通过后获取试题
2. 在答题过程中进行点名，点名成功方可继续答题
3. 答题有时间限制，时间结束提示用户提交试题答案，不可继续答题
4. 提交答案成功展示考试结果

### 模拟考试
试题类型包括单选、多选、判断是三种类型，确定试题答案后不可再次更改答案。
除不需要点名外，考试次数无限制，其余规则与正式考试相同

### 课程练习
试题类型包括单选、多选、判断是三种类型，确定试题答案后不可再次更改答案。
1. 可切换试题进行答题
2. 答题错误显示参考答案
3. 完成所有练习题后统计正确率